# telegraf_coretemp

## Overview

`telegraf_coretemp` is a Rust program designed to interface with the Core Temp
application on Windows systems. It reads core temperature and other CPU-related
data from Core Temp's shared memory and formats it for use with Telegraf's
`inputs.exec` plugin. The program retrieves CPU name, core count, individual
core temperatures, and other relevant information.

## Prerequisites

- Rust: Ensure you have Rust installed on your machine. You can download it
  from [the Rust website](https://www.rust-lang.org/).
- Core Temp: This program relies on Core Temp for data. Ensure Core Temp is
  installed and running on your system. Download it from [the Core Temp
  website](https://www.alcpu.com/CoreTemp/).
- Telegraf: Make sure Telegraf is installed. For installation instructions,
  visit [the Telegraf
  website](https://www.influxdata.com/time-series-platform/telegraf/).

## Installation

1. Clone the repository:
   ```sh
   git clone https://github.com/Nohac/telegraf_coretemp
   ```
2. Navigate to the cloned directory:
   ```sh
   cd telegraf_coretemp
   ```
3. Build the project:
   ```sh
   cargo build --release
   ```
4. The executable will be located in `target/release/`.

## Configuration

### Telegraf

Configure Telegraf to use the `inputs.exec` plugin with this program:

1. Open your Telegraf configuration file (`telegraf.conf`).
2. Add the following lines under `[[inputs.exec]]`:
   ```toml
   [[inputs.exec]]
     commands = ["path/to/telegraf_coretemp"]
     timeout = "5s"
     data_format = "influx"
   ```
   Replace `path/to/telegraf_coretemp` with the actual path to the `telegraf_coretemp` executable.

### Program

No additional configuration is required for the program itself.

## Usage

Once configured with Telegraf, the `telegraf_coretemp` program will run at the
specified intervals set in your Telegraf configuration. The program will output
data in InfluxDB line protocol format, which can be directly used by Telegraf
to populate a time-series database.

## Output Format

The program outputs data in the following format:
```
coretemp,cpu=[CPU_Name],core_count=[Core_Count] core0_temp=[Temp0],core1_temp=[Temp1],...
```
where `[CPU_Name]` is the name of the CPU, `[Core_Count]` is the number of
cores, and `[TempX]` is the temperature of core X.

## Troubleshooting

- Ensure Core Temp is running and accessible.
- Verify that the path in the Telegraf configuration is correct.
- If the program cannot open the file mapping or map the view of the file, it
  may indicate an issue with Core Temp's shared memory.

For further assistance, please refer to the issue tracker on the GitHub
repository page.

---

This document was mostly generated by ChatGPT. 
